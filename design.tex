\section{Design}
(overview and definitions)

* single-page design

* information-searching / focus+context design

* walk-through first use instead of tutorial (see, copy, do) /cite{?}

* use existing terminology (but also define it)

In the ideal modeling toolkit, trained machine learning models can be tested alongside dynamical systems formulations of behavioral theory. 
Though greater accuracy may often be achieved using a data-driven model, the theoretical formulation may provide additional insight into the system behavior, and connections to conceptual models can be drawn. 
Enabling easy system configuration allows researchers to leverage the best of all fields, creating a balance between predictive accuracy and model clarity depending on the userâ€™s needs. 
The system configuration must have an intuitive high-level representation, and a highly-detailed interface for defining specifics. 
The user should be given the option to make many modeling assumptions to maximize ease of use, or to make few assumptions to ensure modeling specificity. 
Model re-use and extension must be supported by allowing concepts to operate in interchangeable modules, requiring carefully-defined standards for interface between modules. 
The ideal toolkit also supports model evaluation, comparison, optimization, and exploration to aid the user.

\subsection{HBM info-flow graph}
A "standard" approach to describing, designing, and visualizing human behavior models for personal forecasting is needed.
There are countless approaches to systems modeling, but concepts and methods ought to be incorporated and fused when possible in their application to behavioral science.
The resulting specification will allow for the formal description of a Human Behavior Model (HBM).

We will begin with the most basic definitions and then progress into the intricacies and usage examples of the proposed model-modeling paradigm.

A model is comprised of a network of variables and their interrelations.
In order to visually represent the connectivity of the model a network graph can be used.
Network graphs have many applications across multiple disciplines, and though the different implementations can be visually similar they can differ significantly in their meaning.
In general, however, a graph is comprised of nodes and edges which represent the variables and their connections, respectfully. 

We argue that the most intuitive representation is one which uses a directed graph wherein edge arrows to represent the flow of information between nodes.
Thus, a HBM  directed graph edge from node A to node B indicates that information flows from node A into node B. 

A => B
Graph 1: Can be read as "A influences B", "A informs B", or similar

This choice of notation is in agreement with graphs used in information theory, communications models, and behavioral science.
In contrast, some graphing paradigms (such as probabilistic graphical models) prefer to use notation wherein an edge is used to represent dependency.
In these paradigms edges may be read from tail to head as "depends on" or similar.

While the network graph does an excellent job showing the connectivity of a model, it fails to indicate the meaning of each connection.
In the majority of existing applications, the mathematical form of the relationship is implied or else it is neglected completely.
For instance, path diagrams from the behavioral sciences frequently denote dependence and do not specify functional form.
Adding even further to the confusion is the notion that these graphs are often developed using different statistical analyses which may make different assumptions about the functional definition of inter-variate dependency.
The most common analyses assess linear relationships between variables, and thus it is perhaps reasonable to assume that this is the intention of most authors.
Assuming this is the case we can return to our simplistic example in Graph 1 and interpret the implied relationship as:

B = coeff_ab*A + const
Equation 1: coeff represents the correlation coefficient which relates A to B, 
and const represents a scalar constant

For nodes with multiple inflow edges, such as node B in the following graph:

A => B <= C => D
Graph 2: Example; now with more nodes!

The resulting formulation is simply a sum of the inflows:

B = coeff_ab*A + coeff_cb*C + const
Equation 2: Combining multiple inflows via sum is referred to as the superposition principle and is the defining characteristic of linear systems (not to be confused with this linear formulation)

Using this formulation, the general form of our HBM is expressed via the network graph alone (perhaps along with a statement about what edges mean).
To express an ideographic implementation of this general model, we must also include a table of coefficient values. This representation is useful, but also very limited.
One important feature which this formulation does not take into account is the dynamics of the relationship.
This is very important for human behavior modeling because the variables in a HBM will often change their value over time.
Taking time into account our formulation for Graph 1 becomes:

B(t) = coeff_ab*A(t) + const

Looking at this closely we can note that at each point in time the value of A depends only on the value of B at that same instant in time.
This assumption is fine for many applications, but we argue that this is a very poor assumption for human behavior models. What if A is influenced by B but there is some lag before the effect manifests?
What if A is influenced by B, but only if B is above some threshold value? What if A is influenced by the rate of change in B rather than the value of B itself? All of these scenarios cannot be expressed using this simple linear relationship. 

To resolve some of these issues, a differential equations can be used to describe the relationship between variables as described by (CSEL paper which connects path diagrams and fluid-flow). Using the differential formulation our equation for Graph 1 becomes:

B(t) = TODO..

Just as before, our general model is not expressed entirely through the graph, and an ideographic example is specified by providing table of coefficient values.
Our table is now quite a bit larger, but these coefficients have meaningful definitions which relate to our theory.
While this formulation offers a huge improvement over the linear formulation, we can still imagine relationships which this formulation cannot express.
Thus, a graph-wide assumption that each edge represents a differential equation may not be general enough for our HBM specification. 

It should be noted at this point that although the linear formulation is too simple to express the dynamics of the differential formulation, the differential formulation is capable of expressing linear relationships.
This is accomplished by setting coefficients of dynamical components to 0.
One might think then that there is some general formula which could express any functional form and that this form should be used to express the relationships between variables in our HBM graphs.
While such formulations do exist (such as Taylor or Fourier series approximations or even ANN-based relations), this usage tends to make the model difficult to understand and to simulate with.
Indeed, linear and differential formulations are in such widespread use because of the relative ease with which we can understand and solve them. An additional problem raised by this approach is that of redundant formulations.
Indeed formulations could even subvert the "arrow direction" by drawing information contrary to our original choice of notation.
The graph can then no longer be considered a directed graph, and the meaning of an edge becomes less clear.
Additionally, the table of coefficients needed to express an ideographic case of the model quickly becomes prohibitively large, and the effect of each coefficient on the outcome is not intuitively meaningful.

Let us now consider the case where a graph-wide assumption is NOT made.
That is, we will specify the functional form of each node individually so that each edge on the graph may be linear in form while another may be differential.
This has the benefit of allowing for both complex relationships between variables as well as simplistic ones.
In this way one could craft a model in which two variables are linearly related and a third is dependent on the variance of another variable (a particularly odd formulation, but one which is relevant to behavioral theory).
Unfortunately, this approach also means that a table of formulations must now be included with our graph to show the meaning of each edge in the graph.
Consider for example the table below for Graph 2:

node| formulation                              |    type
======================================================
B   | coeff_ab*A(t) + coeff_cb*C(t) + const     |  linear eq.
D   |      TODO....                             | differential eq.
Table 1: an example formulation table for Graph 2 

If a fixed number of functional forms is adhered to, the graph can be made to visually represent these functional forms through the use of different node icon shapes. 
This approach quickly begins to resemble applications which use flow-based programming. 
Indeed, they are quite similar in their approach, and the specification of a HBM is quite similar to the writing of a program.

Note also that a node can set any arbitrary formulation if needed. 
This is the least desirable situation, since the meaning of an inflow to each node even more convoluted. 
Though this usage reduces the ability of the graph to reduce processing load on the user through abstraction, there may be some cases where this type of formulation is desirable. 
Consider the following graph and formulation table:

A => B <= C => D => E
Graph 3: The final example graph.

% TODO: convert this to latex table

node|      formulation                              | type
======================================================
B   | coeff_ab*A(t) + coeff_cb*sqrt(C(t)) + const_b |  custom
D   |      TODO....                                 | diff. eq.
E   | coeff_de*D(t) + const_de                      | linear eq.
Table 1: an example formulation table for Graph 2 


In conclusion, we propose that an HBM should be specified using the following rules:

% TODO: convert these to item-lists

1 use a graph-wide formula assumption if possible

2 when choosing a formulation, consistency between nodes is most important

3 when choosing a formulation, simplicity and clarity is second only to consistency

4 Thus a HBM specification must include:

   An information flow graph

   one of:

* a graph-wide formulaic assumption

* a formulation table 

In order to express a particular solution of a general HBM, an ideographic HBM must also include a table of coefficient values. 


\subsection{UI considerations}
Ease of use and intuitive user interface is a primary design consideration for existing softwares for modeling and simulation in systems theory. (reference and cite vensim, etc, from here) 
The ease of use of a system is one of the most important factors in the adoption of the system. (cite technology acceptance model?) 
The trans-disciplinary nature of a human-behavior modeling toolkit may require special consideration in order to be usable by those who may be unfamiliar with modeling and simulation concepts.

TODO: Figure: path2flow.png example of the rise in model complexity for the theory of planned behavior when mathematical assumptions are made explicit. (from: Ajzen 1985,1991,2002 (left), Nandola et al. 2013 (right))
